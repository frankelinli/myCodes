---
id: 826
title: ä½¿ç”¨wp-mailæµ‹è¯•é‚®ä»¶åŠŸèƒ½
slug: ä½¿ç”¨wp-mailæµ‹è¯•é‚®ä»¶åŠŸèƒ½
categories:
  - notes
tags: []
---

æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ä½ çš„ WordPress ç«™ç‚¹ä¸Šç”¨ `wp_mail()` åšä¸€æ¬¡ç®€å•æµ‹è¯•ã€‚ä½ åªéœ€è¦åœ¨ `functions.php` æˆ–ä¸´æ—¶æ’ä»¶ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼Œç„¶åè®¿é—®é¡µé¢æˆ–è§¦å‘é’©å­ï¼Œå°±èƒ½çœ‹åˆ°é‚®ä»¶æ˜¯å¦æˆåŠŸå‘é€ã€‚![house](https://images.haoyelaiga.com/house.webp)

## ğŸ§ª ç¤ºä¾‹ï¼šæµ‹è¯• wp_mail() æ˜¯å¦èƒ½å‘é‚®ä»¶

```php
add_action('init', function() {
  if (!isset($_GET['send_test_email'])) return;

  $to = 'wingxyq@qq.com'; // æ›¿æ¢ä¸ºä½ çš„é‚®ç®±åœ°å€
  $subject = 'WordPress wp_mail() æµ‹è¯•é‚®ä»¶';
  $message = 'è¿™æ˜¯ä¸€å°æ¥è‡ª haoyelaiga.com çš„æµ‹è¯•é‚®ä»¶ã€‚';
  $headers = ['Content-Type: text/html; charset=UTF-8'];

  $sent = wp_mail($to, $subject, $message, $headers);

  if ($sent) {
    echo 'âœ… é‚®ä»¶å·²å‘é€ï¼Œè¯·æ£€æŸ¥ä½ çš„é‚®ç®±';
  } else {
    echo 'âŒ é‚®ä»¶å‘é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨é…ç½®æˆ– SMTP è®¾ç½®';
  }
  exit;
});
```

### âœ… ä½¿ç”¨æ–¹æ³•

1. å°†ä»£ç ç²˜è´´åˆ°ä½ çš„ä¸»é¢˜ `functions.php` æ–‡ä»¶ä¸­
2. åœ¨æµè§ˆå™¨è®¿é—®ï¼š`https://haoyelaiga.com/?send_test_email`
3. é¡µé¢ä¼šæ˜¾ç¤ºå‘é€ç»“æœï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰
4. æ£€æŸ¥ä½ çš„é‚®ç®±æ˜¯å¦æ”¶åˆ°é‚®ä»¶

### ğŸ› ï¸ å¦‚æœå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

- æ£€æŸ¥ä¸»æœºæ˜¯å¦ç¦ç”¨äº† `mail()` å‡½æ•°ï¼ˆå¾ˆå¤šå›½å†…ä¸»æœºé»˜è®¤å…³é—­ï¼‰
- æŸ¥çœ‹æ˜¯å¦æœ‰ SMTP æ’ä»¶å†²çªæˆ–æœªé…ç½®
- è€ƒè™‘ä½¿ç”¨ WP Mail SMTP æ’ä»¶æ¥æ¥ç®¡ `wp_mail()`ï¼Œæé«˜é€è¾¾ç‡
