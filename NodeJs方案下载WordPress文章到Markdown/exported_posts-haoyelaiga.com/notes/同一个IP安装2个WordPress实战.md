---
id: 9
title: 同一个IP安装2个WordPress实战
date: '2025-04-16T23:58:27'
author: haoye
categories:
  - notes
tags: []
url: https://haoyelaiga.com/install-two-wp-site-in-same-ip-operation-process/
---

原来的csboke.com已经使用WordPress的默认安装，数据库前缀都是默认的。现在我在haodongxi.com计划安装个新的WordPress

在已有 `csboke.com`（使用默认 WordPress 数据库前缀 `wp_`）的情况下，为 `haodongxi.com` 安装新的 WordPress 是可行的，但需要特别注意 **数据库前缀隔离** 和 **文件目录分离**，以避免冲突。以下是具体操作步骤和注意事项：

***

### ✅ **步骤 1：在宝塔面板创建新站点**

1. **添加站点**

   - 进入宝塔面板 → 「网站」→ 「添加站点」。
   - 绑定域名：`haodongxi.com`（确保域名已解析到服务器IP）。
   - 选择「创建FTP」和「创建数据库」（建议勾选，自动生成账号密码）。

2. **目录隔离**
   - 确保新站点的根目录与旧站点独立（如 `/www/websitesroot/haodongxi`）。

***

### ✅ **步骤 2：安装新的 WordPress**

1. **上传 WordPress 程序**

   - 进入新站点的目录（如 `/www/websitesroot/haodongxi`），删除默认的 `index.html`。
   - 上传最新版 WordPress 压缩包并解压，或通过宝塔「一键部署」安装。

2. **修改数据库前缀**（关键步骤！）
   - 在安装过程中，填写数据库信息时，**手动修改表前缀**（如 `wp_my_` 或 `wp2_`），避免与 `csboke.com` 的默认前缀 `wp_` 冲突。 （如果已默认安装，可通过插件 [Change Table Prefix](https://wordpress.org/plugins/change-table-prefix/) 修改。）

3. **完成安装**
   - 输入站点标题、管理员账号等信息，确保与旧站点不同。

***

### ⚠️ **注意事项**

1. **数据库独立性**
   - 两个 WordPress 必须使用**不同的数据库**，或同一数据库下**不同的表前缀**（如 `wp_` 和 `wp_my_`），否则数据会互相覆盖。
2. **配置文件隔离**
   - 检查新站点的 `wp-config.php`，确认以下信息唯一：phpCopydefine(‘DB\_NAME’, ‘haodongxi\_db’); // 数据库名\
     define(‘DB\_USER’, ‘haodongxi\_user’); // 数据库用户\
     define(‘DB\_PASSWORD’, ‘\*\*\*\*\*\*\*\*’); // 数据库密码\
     $table\_prefix = ‘wp\_my\_’; // 表前缀
3. **避免跨站点缓存冲突**
   - 如果使用缓存插件（如 Redis/Memcached），为两个站点配置不同的缓存前缀或实例。
4. **HTTPS 配置**
   - 在宝塔面板为 `haodongxi.com` 单独申请 SSL 证书（Let’s Encrypt）。

***

### 🔧 **常见问题解决**

- **安装后提示“数据库已存在”** 说明数据库名称与旧站点重复，需在宝塔「数据库」中新建一个。
- **新站点访问显示旧站点内容** 检查 Nginx/Apache 配置，确保域名绑定了正确的目录。
- **插件/主题冲突** 两个站点的插件和主题需分别管理，互不影响。

***

### 📌 **推荐优化**

1. **定期备份**
   - 使用宝塔的「计划任务」分别备份两个站点的文件和数据库。
2. **资源监控**
   - 观察服务器负载，避免两个站点同时高流量导致资源不足。

***

### 总结

只要确保 **独立数据库** 或 **不同表前缀**，并在安装时严格隔离目录和配置，`haodongxi.com` 和 `csboke.com` 可以完全独立运行，互不干扰。如果已有默认安装但未修改前缀，建议优先修改前缀以避免潜在风险。

### 如果是不同的数据库了，还有修改前缀吗？

如果 **两个WordPress站点使用不同的数据库**，严格来说**不需要**修改表前缀（`$table_prefix`），因为它们的数据库是物理隔离的，不会产生任何冲突。但出于安全性和规范性考虑，**仍然建议修改前缀**。以下是详细分析：

***

### ✅ **情况 1：不同数据库（推荐做法）**

- **无需修改前缀**： 两个站点的数据表分别存储在不同的数据库中（如 `csboke_db` 和 `haodongxi_db`），即使前缀相同（如默认 `wp_`），也**不会互相干扰**，因为数据库完全独立。

  - 例如：

    - `csboke_db` 中的表：`wp_posts`, `wp_users`…
    - `haodongxi_db` 中的表：`wp_posts`, `wp_users`…
    - **无冲突**，因为数据库不同。

- **但仍建议修改前缀的原因**：

  1. **安全防护**： 默认前缀 `wp_` 是黑客攻击的常见目标，修改前缀（如 `wp_my_`）可降低批量SQL注入的风险。 （工具如 [iThemes Security](https://wordpress.org/plugins/better-wp-security/) 会强制建议修改前缀。）
  2. **避免备份/迁移时的混淆**： 如果未来需要导出单个站点的数据表，独特的前缀能快速筛选（如 `wp_my_%`）。
  3. **规范性**： 多站点管理中，清晰的前缀有助于快速识别表归属（尤其是使用phpMyAdmin时）。

***

### ❌ **情况 2：同一数据库（必须修改前缀！）**

- **必须修改前缀**： 如果两个WordPress共享同一数据库（不推荐），必须确保前缀不同，否则表名会冲突，导致数据覆盖。

  - 例如：

    - 站点1前缀 `wp_` → 表：`wp_posts`
    - 站点2前缀 `wp_my_` → 表：`wp_my_posts`
    - **若前缀相同，安装时会直接报错**：“数据库表已存在”。

***

### 📌 **如何修改前缀？**

#### **安装时修改**（最简单）

在WordPress安装界面填写数据库信息时，手动修改 **表前缀** 字段（如 `wp_my_`）：

#### **安装后修改**

如果已安装但未改前缀，可通过以下方式修改：

1. **插件**：使用 [Change Table Prefix](https://wordpress.org/plugins/change-table-prefix/) 安全修改。

2. **手动修改**：

   - 编辑 `wp-config.php` 文件，修改 `$table_prefix` 值。
   - 通过phpMyAdmin重命名所有旧表（需谨慎操作）。

***

### 🔧 **最佳实践建议**

1. **不同数据库 + 不同前缀**（双重保险）

   - 数据库隔离：`csboke_db` 和 `haodongxi_db`。
   - 前缀区分：`wp_` 和 `wp_my_`。

2. **定期检查**： 通过phpMyAdmin确认两个数据库的表前缀是否符合预期。

***

### **总结**

- **不同数据库** → 前缀可相同，但**建议修改**（安全+规范）。
- **同一数据库** → **必须修改前缀**（否则冲突）。
- **操作优先级**：独立数据库 > 修改前缀。
