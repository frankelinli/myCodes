# 微信公众号管理系统

这是一个简单的微信公众号管理系统，用于处理微信公众号的基本功能，包括自动回复、菜单管理和消息记录等功能。

## 功能特点

- 自动回复功能
- 自定义菜单管理
- 新关注用户欢迎语
- 消息日志记录
- 实时消息查看

## 系统要求

- PHP 7.0+
- Web服务器（Apache/Nginx）
- SSL证书（微信服务器要求）
- 微信公众号账号

## 文件说明

- `index.php`: 主要的消息处理文件，处理微信服务器的消息和事件
- `wx-menu.php`: 微信公众号自定义菜单配置和创建
- `check_messages.php`: 后台检查新消息的接口
- `wx-logs/`: 日志文件目录
  - `messages.log`: 消息日志
  - `recent_messages.json`: 最近消息记录
  - `subscribe.log`: 关注事件日志

## 配置说明

1. 在 `wx-menu.php` 中配置以下参数：
   ```php
   $appid = 'your_appid'; // 替换为您的公众号appid
   $appsecret = 'your_appsecret'; // 替换为您的公众号appsecret
   ```

2. 在 `index.php` 中配置：
   ```php
   $token = 'your_token'; // 替换为您在微信公众平台配置的Token
   ```

## 使用方法

1. 将所有文件上传到支持PHP的Web服务器
2. 确保 `wx-logs` 目录有写入权限
3. 在微信公众平台配置服务器地址为您的 `index.php` 访问地址
4. 运行 `wx-menu.php` 来创建公众号菜单

## 功能说明

1. **消息自动回复**
   - 支持文本消息自动回复
   - 支持图片、语音、视频等多媒体消息记录
   - 新用户关注自动回复欢迎语

2. **菜单管理**
   - 支持创建自定义菜单
   - 当前配置了"加群"等基本功能

3. **消息记录**
   - 自动记录所有接收到的消息
   - 支持查看最近50条消息记录
   - 记录用户互动数据

## 注意事项

- 确保服务器支持SSL
- 正确配置微信公众平台的服务器配置
- 定期检查日志文件大小
- 保护好 appid 和 appsecret 等敏感信息

## 安全建议

- 及时更新 PHP 版本
- 设置适当的文件权限
- 定期备份消息记录
- 不要在公开场合暴露配置信息